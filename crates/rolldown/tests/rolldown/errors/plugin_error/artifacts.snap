---
source: crates/rolldown_testing/src/integration_test.rs
---
# Errors

## PLUGIN_ERROR

```text
[plugin-error-test] Error: Something went wrong inside rolldown, please report this problem at https://github.com/rolldown/rolldown/issues.
A

Stack backtrace:
   0: std::backtrace_rs::backtrace::libunwind::trace
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/../../backtrace/src/backtrace/libunwind.rs:117:9
   1: std::backtrace_rs::backtrace::trace_unsynchronized
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/../../backtrace/src/backtrace/mod.rs:66:14
   2: std::backtrace::Backtrace::create
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/backtrace.rs:331:13
   3: std::backtrace::Backtrace::capture
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/backtrace.rs:296:9
   4: msg<&str>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/anyhow-1.0.100/src/backtrace.rs:27:14
   5: format_err
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/anyhow-1.0.100/src/lib.rs:695:13
   6: {async_fn#0}
             at ./tests/rolldown/errors/plugin_error/mod.rs:26:7
   7: {async_block#0}<integration_rolldown::rolldown::errors::plugin_error::PluginErrorTest>
             at /Users/qing/p/github/rolldown/crates/rolldown_plugin/src/pluginable.rs:229:42
   8: poll<alloc::boxed::Box<(dyn core::future::future::Future<Output=core::result::Result<(), anyhow::Error>> + core::marker::Send), alloc::alloc::Global>>
             at /Users/qing/.rustup/toolchains/1.92.0-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/future/future.rs:133:9
   9: {async_block#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_plugin/src/plugin_driver/build_hooks.rs:30:95
  10: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_plugin/src/plugin_driver/build_hooks.rs:24:3
  11: {async_block#0}
             at ./src/stages/scan_stage.rs:168:51
  12: {async_fn#0}
             at ./src/stages/scan_stage.rs:137:3
  13: {async_block#0}
             at ./src/bundle/bundle.rs:104:6
  14: {async_fn#0}
             at ./src/bundle/bundle.rs:89:3
  15: {async_block#0}
             at ./src/bundle/bundle.rs:49:65
  16: {async_block#0}
             at ./src/bundle/bundle.rs:55:6
  17: {async_fn#0}
             at ./src/bundle/bundle.rs:42:3
  18: {async_block#0}
             at ./src/bundler/impl_bundler_build.rs:17:22
  19: {async_fn#0}
             at ./src/bundler/impl_bundler_build.rs:9:3
  20: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_testing/src/integration_test.rs:405:25
  21: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_testing/src/integration_test.rs:472:87
  22: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_testing/src/integration_test.rs:86:8
  23: {async_block#0}
             at ./tests/rolldown/errors/plugin_error/mod.rs:46:6
  24: poll<&mut dyn core::future::future::Future<Output=()>>
             at /Users/qing/.rustup/toolchains/1.92.0-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/future/future.rs:133:9
  25: {closure#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/park.rs:284:71
  26: with_budget<core::task::poll::Poll<()>, tokio::runtime::park::{impl#4}::block_on::{closure_env#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/task/coop/mod.rs:167:5
  27: budget<core::task::poll::Poll<()>, tokio::runtime::park::{impl#4}::block_on::{closure_env#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/task/coop/mod.rs:133:5
  28: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/park.rs:284:31
  29: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/context/blocking.rs:66:14
  30: {closure#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/scheduler/multi_thread/mod.rs:89:22
  31: enter_runtime<tokio::runtime::scheduler::multi_thread::{impl#0}::block_on::{closure_env#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>, ()>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/context/runtime.rs:65:16
  32: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/scheduler/multi_thread/mod.rs:88:9
  33: block_on_inner<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/runtime.rs:370:50
  34: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/runtime.rs:342:18
  35: should_emit_multi_plugin_diagnostics
             at ./tests/rolldown/errors/plugin_error/mod.rs:46:11
  36: {closure#0}
             at ./tests/rolldown/errors/plugin_error/mod.rs:33:48
  37: call_once<integration_rolldown::rolldown::errors::plugin_error::should_emit_multi_plugin_diagnostics::{closure_env#0}, ()>
             at /Users/qing/.rustup/toolchains/1.92.0-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/ops/function.rs:250:5
  38: core::ops::function::FnOnce::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/ops/function.rs:250:5
  39: test::__rust_begin_short_backtrace
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:663:18
  40: test::run_test_in_process::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:686:74
  41: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/panic/unwind_safe.rs:274:9
  42: std::panicking::catch_unwind::do_call
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:590:40
  43: std::panicking::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:553:19
  44: std::panic::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panic.rs:359:14
  45: test::run_test_in_process
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:686:27
  46: test::run_test::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:607:43
  47: test::run_test::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:637:41
  48: std::sys::backtrace::__rust_begin_short_backtrace
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/sys/backtrace.rs:158:18
  49: std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/thread/mod.rs:562:17
  50: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/panic/unwind_safe.rs:274:9
  51: std::panicking::catch_unwind::do_call
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:590:40
  52: std::panicking::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:553:19
  53: std::panic::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panic.rs:359:14
  54: std::thread::Builder::spawn_unchecked_::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/thread/mod.rs:560:30
  55: core::ops::function::FnOnce::call_once{{vtable.shim}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/ops/function.rs:250:5
  56: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/alloc/src/boxed.rs:2005:9
  57: std::sys::thread::unix::Thread::new::thread_start
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/sys/thread/unix.rs:126:17
  58: __pthread_cond_wait

```

## PLUGIN_ERROR

```text
[plugin-error-test] Error: Something went wrong inside rolldown, please report this problem at https://github.com/rolldown/rolldown/issues.
B

Stack backtrace:
   0: std::backtrace_rs::backtrace::libunwind::trace
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/../../backtrace/src/backtrace/libunwind.rs:117:9
   1: std::backtrace_rs::backtrace::trace_unsynchronized
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/../../backtrace/src/backtrace/mod.rs:66:14
   2: std::backtrace::Backtrace::create
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/backtrace.rs:331:13
   3: std::backtrace::Backtrace::capture
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/backtrace.rs:296:9
   4: msg<&str>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/anyhow-1.0.100/src/backtrace.rs:27:14
   5: format_err
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/anyhow-1.0.100/src/lib.rs:695:13
   6: {async_fn#0}
             at ./tests/rolldown/errors/plugin_error/mod.rs:27:7
   7: {async_block#0}<integration_rolldown::rolldown::errors::plugin_error::PluginErrorTest>
             at /Users/qing/p/github/rolldown/crates/rolldown_plugin/src/pluginable.rs:229:42
   8: poll<alloc::boxed::Box<(dyn core::future::future::Future<Output=core::result::Result<(), anyhow::Error>> + core::marker::Send), alloc::alloc::Global>>
             at /Users/qing/.rustup/toolchains/1.92.0-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/future/future.rs:133:9
   9: {async_block#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_plugin/src/plugin_driver/build_hooks.rs:30:95
  10: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_plugin/src/plugin_driver/build_hooks.rs:24:3
  11: {async_block#0}
             at ./src/stages/scan_stage.rs:168:51
  12: {async_fn#0}
             at ./src/stages/scan_stage.rs:137:3
  13: {async_block#0}
             at ./src/bundle/bundle.rs:104:6
  14: {async_fn#0}
             at ./src/bundle/bundle.rs:89:3
  15: {async_block#0}
             at ./src/bundle/bundle.rs:49:65
  16: {async_block#0}
             at ./src/bundle/bundle.rs:55:6
  17: {async_fn#0}
             at ./src/bundle/bundle.rs:42:3
  18: {async_block#0}
             at ./src/bundler/impl_bundler_build.rs:17:22
  19: {async_fn#0}
             at ./src/bundler/impl_bundler_build.rs:9:3
  20: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_testing/src/integration_test.rs:405:25
  21: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_testing/src/integration_test.rs:472:87
  22: {async_fn#0}
             at /Users/qing/p/github/rolldown/crates/rolldown_testing/src/integration_test.rs:86:8
  23: {async_block#0}
             at ./tests/rolldown/errors/plugin_error/mod.rs:46:6
  24: poll<&mut dyn core::future::future::Future<Output=()>>
             at /Users/qing/.rustup/toolchains/1.92.0-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/future/future.rs:133:9
  25: {closure#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/park.rs:284:71
  26: with_budget<core::task::poll::Poll<()>, tokio::runtime::park::{impl#4}::block_on::{closure_env#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/task/coop/mod.rs:167:5
  27: budget<core::task::poll::Poll<()>, tokio::runtime::park::{impl#4}::block_on::{closure_env#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/task/coop/mod.rs:133:5
  28: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/park.rs:284:31
  29: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/context/blocking.rs:66:14
  30: {closure#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/scheduler/multi_thread/mod.rs:89:22
  31: enter_runtime<tokio::runtime::scheduler::multi_thread::{impl#0}::block_on::{closure_env#0}<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>, ()>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/context/runtime.rs:65:16
  32: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/scheduler/multi_thread/mod.rs:88:9
  33: block_on_inner<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/runtime.rs:370:50
  34: block_on<core::pin::Pin<&mut dyn core::future::future::Future<Output=()>>>
             at /Users/qing/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.49.0/src/runtime/runtime.rs:342:18
  35: should_emit_multi_plugin_diagnostics
             at ./tests/rolldown/errors/plugin_error/mod.rs:46:11
  36: {closure#0}
             at ./tests/rolldown/errors/plugin_error/mod.rs:33:48
  37: call_once<integration_rolldown::rolldown::errors::plugin_error::should_emit_multi_plugin_diagnostics::{closure_env#0}, ()>
             at /Users/qing/.rustup/toolchains/1.92.0-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/ops/function.rs:250:5
  38: core::ops::function::FnOnce::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/ops/function.rs:250:5
  39: test::__rust_begin_short_backtrace
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:663:18
  40: test::run_test_in_process::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:686:74
  41: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/panic/unwind_safe.rs:274:9
  42: std::panicking::catch_unwind::do_call
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:590:40
  43: std::panicking::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:553:19
  44: std::panic::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panic.rs:359:14
  45: test::run_test_in_process
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:686:27
  46: test::run_test::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:607:43
  47: test::run_test::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/test/src/lib.rs:637:41
  48: std::sys::backtrace::__rust_begin_short_backtrace
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/sys/backtrace.rs:158:18
  49: std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/thread/mod.rs:562:17
  50: <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/panic/unwind_safe.rs:274:9
  51: std::panicking::catch_unwind::do_call
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:590:40
  52: std::panicking::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panicking.rs:553:19
  53: std::panic::catch_unwind
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/panic.rs:359:14
  54: std::thread::Builder::spawn_unchecked_::{{closure}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/thread/mod.rs:560:30
  55: core::ops::function::FnOnce::call_once{{vtable.shim}}
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/core/src/ops/function.rs:250:5
  56: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/alloc/src/boxed.rs:2005:9
  57: std::sys::thread::unix::Thread::new::thread_start
             at /rustc/ded5c06cf21d2b93bffd5d884aa6e96934ee4234/library/std/src/sys/thread/unix.rs:126:17
  58: __pthread_cond_wait

```
