---
source: crates/rolldown_testing/src/integration_test.rs
---
# Assets

## main.js

```js
import assert from "node:assert";

// HIDDEN [rolldown:runtime]
//#region setup.js
var init_setup = __esm({ "setup.js": (() => {
	globalThis.globalValue = "foo";
}) });

//#endregion
//#region foo_inner.js
var foo_inner_default;
var init_foo_inner = __esm({ "foo_inner.js": (() => {
	foo_inner_default = { foo: /* @__PURE__ */ (() => globalValue)() };
}) });

//#endregion
//#region foo.js
var init_foo = __esm({ "foo.js": (() => {
	init_foo_inner();
	assert.strictEqual(foo_inner_default.foo, "foo");
}) });

//#endregion
//#region main.js
var init_main = __esm({ "main.js": (() => {
	init_setup();
	init_foo();
	init_foo_inner();
	assert.equal(foo_inner_default.foo, "foo");
}) });

//#endregion
init_main();
```
---

Variant: [on_demand_wrapping: true]

# Assets

## main.js

```js
import assert from "node:assert";

// HIDDEN [rolldown:runtime]

var foo_inner_default;
var init_main = __esm({"main.js": () => {
//#region setup.js
globalThis.globalValue = "foo";

//#endregion
//#region foo_inner.js
foo_inner_default = { foo: /* @__PURE__ */ (() => globalValue)() };

//#endregion
//#region foo.js
assert.strictEqual(foo_inner_default.foo, "foo");

//#endregion
//#region main.js
assert.equal(foo_inner_default.foo, "foo");

//#endregion
}});

init_main();
```
