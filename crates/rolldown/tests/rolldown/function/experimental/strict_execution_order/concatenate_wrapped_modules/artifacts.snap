---
source: crates/rolldown_testing/src/integration_test.rs
---
# Assets

## main.js

```js
import assert from "node:assert";
// HIDDEN [\0rolldown/runtime.js]
//#region setup.js
var init_setup = __esmMin((() => {
	globalThis.globalValue = "foo";
}));
//#endregion
//#region foo_inner.js
var foo_inner_default;
var init_foo_inner = __esmMin((() => {
	foo_inner_default = { foo: globalValue };
}));
//#endregion
//#region foo.js
var init_foo = __esmMin((() => {
	init_foo_inner();
	assert.strictEqual(foo_inner_default.foo, "foo");
}));
//#endregion
__esmMin((() => {
	init_setup();
	init_foo();
	init_foo_inner();
	assert.equal(foo_inner_default.foo, "foo");
}))();

```

# Variant: [on_demand_wrapping: true]

## Assets

### main.js

```js
import assert from "node:assert";
// HIDDEN [\0rolldown/runtime.js]
var foo_inner_default;
__esmMin((() => {
	//#region setup.js
	globalThis.globalValue = "foo";
	//#endregion
	//#region foo_inner.js
	foo_inner_default = { foo: globalValue };
	//#endregion
	//#region foo.js
	assert.strictEqual(foo_inner_default.foo, "foo");
	//#endregion
	//#region main.js
	assert.equal(foo_inner_default.foo, "foo");
	//#endregion
}))();

```
