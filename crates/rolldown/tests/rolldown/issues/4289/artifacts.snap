---
source: crates/rolldown_testing/src/integration_test.rs
---
# Assets

## chunk.js

```js

export { __commonJS, __toDynamicImportESM };
```
## lib.js

```js
import { __commonJS } from "./chunk.js";

//#region lib.js
var require_lib = __commonJS({ "lib.js"(exports) {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.parse = "parse";
} });

//#endregion
export default require_lib();

```
## main.js

```js
import { __toDynamicImportESM } from "./chunk.js";
import nodeAssert from "node:assert";

//#region non-node-mode.js
async function main$1() {
	const exports = await import("./lib.js").then(__toDynamicImportESM());
	nodeAssert.deepEqual(Object.keys(exports).sort(), ["parse"]);
	nodeAssert.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	nodeAssert.strictEqual(exports.default, void 0, "Target has __esModule, so no auto-generated default export");
}
main$1();

//#endregion
//#region node-mode-by-mjs-extension.mjs
async function main() {
	const exports = await import("./lib.js").then(__toDynamicImportESM(1));
	nodeAssert.deepEqual(Object.keys(exports).sort(), ["default", "parse"]);
	nodeAssert.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	nodeAssert.strictEqual(exports.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
}
main();

//#endregion
```
---

Variant: (format: Cjs)

# Assets

## chunk.js

```js


Object.defineProperty(exports, '__commonJS', {
  enumerable: true,
  get: function () {
    return __commonJS;
  }
});
Object.defineProperty(exports, '__toDynamicImportESM', {
  enumerable: true,
  get: function () {
    return __toDynamicImportESM;
  }
});
Object.defineProperty(exports, '__toESM', {
  enumerable: true,
  get: function () {
    return __toESM;
  }
});
```
## lib.js

```js
const require_chunk = require('./chunk.js');

//#region lib.js
var require_lib = require_chunk.__commonJS({ "lib.js"(exports) {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.parse = "parse";
} });

//#endregion
Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function () {
    return require_lib();
  }
});
```
## main.js

```js
const require_chunk = require('./chunk.js');
const node_assert = require_chunk.__toESM(require("node:assert"));

//#region non-node-mode.js
async function main$1() {
	const exports$1 = await Promise.resolve().then(() => require_chunk.__toDynamicImportESM()(require("./lib.js")));
	node_assert.default.deepEqual(Object.keys(exports$1).sort(), ["parse"]);
	node_assert.default.strictEqual(exports$1.parse, "parse", "Expected export exists and is correct");
	node_assert.default.strictEqual(exports$1.default, void 0, "Target has __esModule, so no auto-generated default export");
}
main$1();

//#endregion
//#region node-mode-by-mjs-extension.mjs
async function main() {
	const exports$1 = await Promise.resolve().then(() => require_chunk.__toDynamicImportESM(1)(require("./lib.js")));
	node_assert.default.deepEqual(Object.keys(exports$1).sort(), ["default", "parse"]);
	node_assert.default.strictEqual(exports$1.parse, "parse", "Expected export exists and is correct");
	node_assert.default.strictEqual(exports$1.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
}
main();

//#endregion
```
