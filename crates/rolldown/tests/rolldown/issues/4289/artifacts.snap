---
source: crates/rolldown_testing/src/integration_test.rs
---
# Assets

## lib.js

```js
import { t as __commonJSMin } from "./main.js";

//#region lib.js
var require_lib = /* @__PURE__ */ __commonJSMin(((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.parse = "parse";
}));

//#endregion
export default require_lib();

```

## main.js

```js
import nodeAssert from "node:assert";

// HIDDEN [\0rolldown/runtime.js]
//#region non-node-mode.js
async function main$1() {
	const exports = await import("./lib.js").then((m) => /* @__PURE__ */ __toESM(m.default));
	nodeAssert.deepEqual(Object.keys(exports).sort(), ["parse"]);
	nodeAssert.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	nodeAssert.strictEqual(exports.default, void 0, "Target has __esModule, so no auto-generated default export");
}
main$1();

//#endregion
//#region node-mode-by-mjs-extension.mjs
async function main() {
	const exports = await import("./lib.js").then((m) => /* @__PURE__ */ __toESM(m.default, 1));
	nodeAssert.deepEqual(Object.keys(exports).sort(), ["default", "parse"]);
	nodeAssert.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	nodeAssert.strictEqual(exports.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
}
main();

//#endregion
//#region node-mode-by-cjs-extension.cjs
var require_node_mode_by_cjs_extension = /* @__PURE__ */ __commonJSMin(((exports, module) => {
	async function main() {
		const exports$1 = await import("./lib.js").then((m) => /* @__PURE__ */ __toESM(m.default, 1));
		nodeAssert.deepEqual(Object.keys(exports$1).sort(), ["default", "parse"]);
		nodeAssert.strictEqual(exports$1.parse, "parse", "Expected export exists and is correct");
		nodeAssert.strictEqual(exports$1.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
	}
	main();
	module.exports = {};
}));

//#endregion
//#region main.js
var import_node_mode_by_cjs_extension = require_node_mode_by_cjs_extension();

//#endregion
export { __commonJSMin as t };
```

# Variant: [format: Cjs]

## Assets

### lib.js

```js
const require_main = require('./main.js');

//#region lib.js
var require_lib = /* @__PURE__ */ require_main.__commonJSMin(((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.parse = "parse";
}));

//#endregion
Object.defineProperty(exports, 'default', {
  enumerable: true,
  get: function () {
    return require_lib();
  }
});
```

### main.js

```js
Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
// HIDDEN [\0rolldown/runtime.js]
let node_assert = require("node:assert");
node_assert = __toESM(node_assert);

//#region non-node-mode.js
async function main$1() {
	const exports = await Promise.resolve().then(() => /* @__PURE__ */ __toESM(require("./lib.js").default));
	node_assert.default.deepEqual(Object.keys(exports).sort(), ["parse"]);
	node_assert.default.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	node_assert.default.strictEqual(exports.default, void 0, "Target has __esModule, so no auto-generated default export");
}
main$1();

//#endregion
//#region node-mode-by-mjs-extension.mjs
async function main() {
	const exports = await Promise.resolve().then(() => /* @__PURE__ */ __toESM(require("./lib.js").default, 1));
	node_assert.default.deepEqual(Object.keys(exports).sort(), ["default", "parse"]);
	node_assert.default.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	node_assert.default.strictEqual(exports.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
}
main();

//#endregion
//#region node-mode-by-cjs-extension.cjs
var require_node_mode_by_cjs_extension = /* @__PURE__ */ __commonJSMin(((exports, module) => {
	async function main() {
		const exports$1 = await Promise.resolve().then(() => /* @__PURE__ */ __toESM(require("./lib.js").default, 1));
		node_assert.default.deepEqual(Object.keys(exports$1).sort(), ["default", "parse"]);
		node_assert.default.strictEqual(exports$1.parse, "parse", "Expected export exists and is correct");
		node_assert.default.strictEqual(exports$1.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
	}
	main();
	module.exports = {};
}));

//#endregion
//#region main.js
var import_node_mode_by_cjs_extension = require_node_mode_by_cjs_extension();

//#endregion
exports.__commonJSMin = __commonJSMin;
```

# Variant: [inline_dynamic_imports: true]

## Assets

### main.js

```js
import nodeAssert from "node:assert";

// HIDDEN [\0rolldown/runtime.js]
//#region lib.js
var require_lib = /* @__PURE__ */ __commonJSMin(((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.parse = "parse";
}));

//#endregion
//#region non-node-mode.js
async function main$1() {
	const exports = await Promise.resolve().then(() => /* @__PURE__ */ __toESM(require_lib()));
	nodeAssert.deepEqual(Object.keys(exports).sort(), ["parse"]);
	nodeAssert.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	nodeAssert.strictEqual(exports.default, void 0, "Target has __esModule, so no auto-generated default export");
}
main$1();

//#endregion
//#region node-mode-by-mjs-extension.mjs
async function main() {
	const exports = await Promise.resolve().then(() => /* @__PURE__ */ __toESM(require_lib(), 1));
	nodeAssert.deepEqual(Object.keys(exports).sort(), ["default", "parse"]);
	nodeAssert.strictEqual(exports.parse, "parse", "Expected export exists and is correct");
	nodeAssert.strictEqual(exports.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
}
main();

//#endregion
//#region node-mode-by-cjs-extension.cjs
var require_node_mode_by_cjs_extension = /* @__PURE__ */ __commonJSMin(((exports, module) => {
	async function main() {
		const exports$1 = await Promise.resolve().then(() => /* @__PURE__ */ __toESM(require_lib(), 1));
		nodeAssert.deepEqual(Object.keys(exports$1).sort(), ["default", "parse"]);
		nodeAssert.strictEqual(exports$1.parse, "parse", "Expected export exists and is correct");
		nodeAssert.strictEqual(exports$1.default.parse, "parse", "Target has __esModule, but this file triggered node compat mode");
	}
	main();
	module.exports = {};
}));

//#endregion
//#region main.js
var import_node_mode_by_cjs_extension = require_node_mode_by_cjs_extension();

//#endregion
```
