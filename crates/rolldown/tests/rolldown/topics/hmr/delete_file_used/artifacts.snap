---
source: crates/rolldown_testing/src/integration_test.rs
---
# Assets

## main.js

```js
// HIDDEN [\0rolldown/runtime.js]
// HIDDEN [rolldown:hmr]
//#region child.js
var child_exports = /* @__PURE__ */ __exportAll({ value: () => value });
const child_hot = __rolldown_runtime__.createModuleHotContext("child.js");
__rolldown_runtime__.registerModule("child.js", { exports: child_exports });
const value = "child";

//#endregion
//#region parent.js
var parent_exports = /* @__PURE__ */ __exportAll({
	childValue: () => value,
	parentValue: () => parentValue
});
const parent_hot = __rolldown_runtime__.createModuleHotContext("parent.js");
__rolldown_runtime__.registerModule("parent.js", { exports: parent_exports });
const parentValue = "parent";
parent_hot.accept((newMod) => {
	const { childValue, parentValue } = newMod;
	assert.strictEqual(parentValue, "parent");
	assert.strictEqual(childValue, "child");
});

//#endregion
//#region main.js
var main_exports = /* @__PURE__ */ __exportAll({});
const main_hot = __rolldown_runtime__.createModuleHotContext("main.js");
__rolldown_runtime__.registerModule("main.js", { exports: main_exports });

//#endregion
```

# HMR Step 0

## Code

```js
//#region parent.js
var init_parent_0 = __rolldown_runtime__.createEsmInitializer((function() {
	try {
		var __rolldown_exports__ = __rolldown_runtime__.__exportAll({
			parentValue: () => parentValue,
			childValue: () => import_child_00.value
		});
		__rolldown_runtime__.registerModule("parent.js", { exports: __rolldown_exports__ });
		const hot_parent = __rolldown_runtime__.createModuleHotContext("parent.js");
		var import_child_00 = __rolldown_runtime__.loadExports("child.js");
		const parentValue = "parent";
		hot_parent.accept((newMod) => {
			const { childValue, parentValue } = newMod;
			assert.strictEqual(parentValue, "parent");
			assert.strictEqual(childValue, "child");
		});
	} finally {}
}));

//#endregion
init_parent_0()
__rolldown_runtime__.applyUpdates([['parent.js', 'parent.js']]);
```

## Meta

- update type: patch

### Hmr Boundaries

- boundary: parent.js, accepted_via: parent.js

# HMR Step 1

## Code

```js
//#region child.js
var init_child_0 = __rolldown_runtime__.createEsmInitializer((function() {
	try {
		var __rolldown_exports__ = __rolldown_runtime__.__exportAll({ value: () => value });
		__rolldown_runtime__.registerModule("child.js", { exports: __rolldown_exports__ });
		const hot_child = __rolldown_runtime__.createModuleHotContext("child.js");
		const value = "child";
	} finally {}
}));

//#endregion
//#region parent.js
var init_parent_1 = __rolldown_runtime__.createEsmInitializer((function() {
	try {
		var __rolldown_exports__ = __rolldown_runtime__.__exportAll({
			parentValue: () => parentValue,
			childValue: () => import_child_10.value
		});
		__rolldown_runtime__.registerModule("parent.js", { exports: __rolldown_exports__ });
		init_child_0();
		const hot_parent = __rolldown_runtime__.createModuleHotContext("parent.js");
		var import_child_10 = __rolldown_runtime__.loadExports("child.js");
		const parentValue = "parent";
		hot_parent.accept((newMod) => {
			const { childValue, parentValue } = newMod;
			assert.strictEqual(parentValue, "parent");
			assert.strictEqual(childValue, "child");
		});
	} finally {}
}));

//#endregion
init_parent_1()
__rolldown_runtime__.applyUpdates([['parent.js', 'parent.js']]);
```

## Meta

- update type: patch

### Hmr Boundaries

- boundary: parent.js, accepted_via: parent.js
