[build]
# only build on netlify if there are any change in docs
ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF ./docs ./packages/rolldown"

[[redirects]]
from = "/about/"
to = "/guide/"

[[redirects]]
from = "/plugins/hook-filters"
to = "/apis/plugin-hook-filters"

[[redirects]]
from = "/guide/plugin-development"
to = "/plugins/"

[[redirects]]
from = "/reference/"
to = "/apis/"

[[redirects]]
from = "/guide/in-depth/"
to = "/in-depth/"

[[redirects]]
from = "/apis/config-options/"
to = "/reference/"

[[redirects]]
from = "/options/"
to = "/reference"

[[redirects]]
from = "/apis/plugin-hook-filters"
to = "/apis/plugin-api/hook-filters"

# Redirect old /options/ paths to /reference/
[[redirects]]
from = "/options/input"
to = "/reference/InputOptions.input"

[[redirects]]
from = "/options/external"
to = "/reference/InputOptions.external"

[[redirects]]
from = "/options/resolve"
to = "/reference/InputOptions.resolve"

[[redirects]]
from = "/options/cwd"
to = "/reference/InputOptions.cwd"

[[redirects]]
from = "/options/platform"
to = "/reference/InputOptions.platform"

[[redirects]]
from = "/options/shim-missing-exports"
to = "/reference/InputOptions.shimMissingExports"

[[redirects]]
from = "/options/treeshake"
to = "/reference/InputOptions.treeshake"

[[redirects]]
from = "/options/log-level"
to = "/reference/InputOptions.logLevel"

[[redirects]]
from = "/options/on-log"
to = "/reference/InputOptions.onLog"

[[redirects]]
from = "/options/onwarn"
to = "/reference/InputOptions.onwarn"

[[redirects]]
from = "/options/module-types"
to = "/reference/InputOptions.moduleTypes"

[[redirects]]
from = "/options/preserve-entry-signatures"
to = "/reference/InputOptions.preserveEntrySignatures"

[[redirects]]
from = "/options/optimization"
to = "/reference/InputOptions.optimization"

[[redirects]]
from = "/options/context"
to = "/reference/InputOptions.context"

[[redirects]]
from = "/options/tsconfig"
to = "/reference/InputOptions.tsconfig"

[[redirects]]
from = "/options/checks"
to = "/reference/InputOptions.checks"

[[redirects]]
from = "/options/experimental"
to = "/reference/InputOptions.experimental"

[[redirects]]
from = "/options/output"
to = "/reference/Interface.OutputOptions"

[[redirects]]
from = "/options/output-sourcemap"
to = "/reference/OutputOptions.sourcemap"

[[redirects]]
from = "/options/output-generated-code"
to = "/reference/OutputOptions.generatedCode"

[[redirects]]
from = "/options/output-advanced-chunks"
to = "/reference/OutputOptions.codeSplitting"

[[redirects]]
from = "/in-depth/advanced-chunks"
to = "/in-depth/manual-code-splitting"

[[redirects]]
from = "/in-depth/code-splitting"
to = "/in-depth/automatic-code-splitting"

[[redirects]]
from = "/options/output-clean-dir"
to = "/reference/OutputOptions.cleanDir"

# https://github.com/okineadev/vitepress-plugin-llms#netlify
[[redirects]]
from = "/*.txt"
status = 301
to = "/:splat.md"

[[redirects]]
from = "/llms.md"
status = 301
to = "/llms.txt"

[[redirects]]
force = true
from = "/llms.txt"
status = 200
to = "/llms.txt"

[[redirects]]
force = true
from = "/llms-full.md"
status = 200
to = "/llms-full.txt"

[[redirects]]
force = true
from = "/llms-full.txt"
status = 200
to = "/llms-full.txt"
